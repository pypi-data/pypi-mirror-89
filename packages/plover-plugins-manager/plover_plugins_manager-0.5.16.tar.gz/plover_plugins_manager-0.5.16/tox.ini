[tox]
minversion = 3.2.0
requires =
	tox-pip-version
	tox-venv
envlist = python, packaging

[testenv]
passenv = LC_ALL
pip_version = pip>=19.3
install_command = python test/tox_pip.py install {opts} {packages}
deps =
	-U
	-rtest/requirements.txt
commands =
	pytest {posargs}
usedevelop = True

[testenv:packaging]
skip_install = True
deps =
	{[testenv]deps}
	check-manifest
	readme-renderer[md]
	twine
	wheel
commands =
	check-manifest
	python setup.py check -m -s
	python -c 'import shutil; shutil.rmtree("dist", ignore_errors=True)'
	python setup.py sdist bdist_wheel
	twine check dist/*

[pytest]
addopts = -ra -n4
