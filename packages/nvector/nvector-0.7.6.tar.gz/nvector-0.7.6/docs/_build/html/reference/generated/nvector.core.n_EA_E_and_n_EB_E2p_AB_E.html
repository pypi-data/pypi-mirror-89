

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.2.13. nvector.core.n_EA_E_and_n_EB_E2p_AB_E &mdash; Nvector 0.7.6 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.2.14. nvector.core.n_EA_E_and_p_AB_E2n_EB_E" href="nvector.core.n_EA_E_and_p_AB_E2n_EB_E.html" />
    <link rel="prev" title="5.2.12. nvector.core.p_EB_E2n_EB_E" href="nvector.core.p_EB_E2n_EB_E.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Nvector
          

          
          </a>

          
            
            
              <div class="version">
                0.7
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro/index.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">2. Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-to/index.html">3. How-to guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../topics/index.html">4. Topics guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">5. Reference nvector package</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../nvector_summary.html">5.1. Object Oriented interface to Geodesic functions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../nvector_summary.html#geodesic-functions">5.2. Geodesic functions</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="nvector.core.closest_point_on_great_circle.html">5.2.1. nvector.core.closest_point_on_great_circle</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.cross_track_distance.html">5.2.2. nvector.core.cross_track_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.euclidean_distance.html">5.2.3. nvector.core.euclidean_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.great_circle_distance.html">5.2.4. nvector.core.great_circle_distance</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.great_circle_normal.html">5.2.5. nvector.core.great_circle_normal</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.interpolate.html">5.2.6. nvector.core.interpolate</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.intersect.html">5.2.7. nvector.core.intersect</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.lat_lon2n_E.html">5.2.8. nvector.core.lat_lon2n_E</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.mean_horizontal_position.html">5.2.9. nvector.core.mean_horizontal_position</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.n_E2lat_lon.html">5.2.10. nvector.core.n_E2lat_lon</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.n_EB_E2p_EB_E.html">5.2.11. nvector.core.n_EB_E2p_EB_E</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.p_EB_E2n_EB_E.html">5.2.12. nvector.core.p_EB_E2n_EB_E</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">5.2.13. nvector.core.n_EA_E_and_n_EB_E2p_AB_E</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.n_EA_E_and_p_AB_E2n_EB_E.html">5.2.14. nvector.core.n_EA_E_and_p_AB_E2n_EB_E</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.n_EA_E_and_n_EB_E2azimuth.html">5.2.15. nvector.core.n_EA_E_and_n_EB_E2azimuth</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.n_EA_E_distance_and_azimuth2n_EB_E.html">5.2.16. nvector.core.n_EA_E_distance_and_azimuth2n_EB_E</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.on_great_circle.html">5.2.17. nvector.core.on_great_circle</a></li>
<li class="toctree-l3"><a class="reference internal" href="nvector.core.on_great_circle_path.html">5.2.18. nvector.core.on_great_circle_path</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../nvector_summary.html#rotation-matrices-and-angles">5.3. Rotation matrices and angles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nvector_summary.html#utility-functions">5.4. Utility functions</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/authors.html">Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/acknowledgement.html">Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/index.html">Indices and tables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendix/zreferences.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Nvector</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">5. </span>Reference nvector package</a> &raquo;</li>
        
          <li><a href="../nvector_summary.html"><span class="section-number">5.1. </span>Object Oriented interface to Geodesic functions</a> &raquo;</li>
        
      <li><span class="section-number">5.2.13. </span>nvector.core.n_EA_E_and_n_EB_E2p_AB_E</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/reference/generated/nvector.core.n_EA_E_and_n_EB_E2p_AB_E.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="nvector-core-n-ea-e-and-n-eb-e2p-ab-e">
<h1><span class="section-number">5.2.13. </span>nvector.core.n_EA_E_and_n_EB_E2p_AB_E<a class="headerlink" href="#nvector-core-n-ea-e-and-n-eb-e2p-ab-e" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="nvector.core.n_EA_E_and_n_EB_E2p_AB_E">
<code class="sig-name descname">n_EA_E_and_n_EB_E2p_AB_E</code><span class="sig-paren">(</span><em class="sig-param">n_EA_E</em>, <em class="sig-param">n_EB_E</em>, <em class="sig-param">z_EA=0</em>, <em class="sig-param">z_EB=0</em>, <em class="sig-param">a=6378137</em>, <em class="sig-param">f=0.0033528106647474805</em>, <em class="sig-param">R_Ee=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/nvector/core.html#n_EA_E_and_n_EB_E2p_AB_E"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#nvector.core.n_EA_E_and_n_EB_E2p_AB_E" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the delta vector from position A to B decomposed in E.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>n_EA_E, n_EB_E:  3 x n array</strong></dt><dd><p>n-vector(s) [no unit] of position A and B, decomposed in E.</p>
</dd>
<dt><strong>z_EA, z_EB:  1 x n array</strong></dt><dd><p>Depth(s) [m] of system A and B, relative to the ellipsoid.
(z_EA = -height, z_EB = -height)</p>
</dd>
<dt><strong>a: real scalar, default WGS-84 ellipsoid.</strong></dt><dd><p>Semi-major axis of the Earth ellipsoid given in [m].</p>
</dd>
<dt><strong>f: real scalar, default WGS-84 ellipsoid.</strong></dt><dd><p>Flattening [no unit] of the Earth ellipsoid. If f==0 then spherical
Earth with radius a is used in stead of WGS-84.</p>
</dd>
<dt><strong>R_Ee</strong><span class="classifier">3 x 3 array</span></dt><dd><p>rotation matrix defining the axes of the coordinate frame E.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>p_AB_E:  3 x n array</dt><dd><p>Cartesian position vector(s) from A to B, decomposed in E.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><a class="reference internal" href="nvector.core.n_EA_E_and_p_AB_E2n_EB_E.html#nvector.core.n_EA_E_and_p_AB_E2n_EB_E" title="nvector.core.n_EA_E_and_p_AB_E2n_EB_E"><code class="xref py py-obj docutils literal notranslate"><span class="pre">n_EA_E_and_p_AB_E2n_EB_E</span></code></a>, <a class="reference internal" href="nvector.core.p_EB_E2n_EB_E.html#nvector.core.p_EB_E2n_EB_E" title="nvector.core.p_EB_E2n_EB_E"><code class="xref py py-obj docutils literal notranslate"><span class="pre">p_EB_E2n_EB_E</span></code></a>, <a class="reference internal" href="nvector.core.n_EB_E2p_EB_E.html#nvector.core.n_EB_E2p_EB_E" title="nvector.core.n_EB_E2p_EB_E"><code class="xref py py-obj docutils literal notranslate"><span class="pre">n_EB_E2p_EB_E</span></code></a></dt><dd></dd>
</dl>
</div>
<p class="rubric">Notes</p>
<p>The n-vectors for positions A (n_EA_E) and B (n_EB_E) are given. The
output is the delta vector from A to B (p_AB_E).
The calculation is excact, taking the ellipsity of the Earth into account.
It is also non-singular as both n-vector and p-vector are non-singular
(except for the center of the Earth).
The default ellipsoid model used is WGS-84, but other ellipsoids/spheres
might be specified.</p>
<p class="rubric">Examples</p>
<p><strong>Example 1: “A and B to delta”</strong></p>
<img alt="https://raw.githubusercontent.com/pbrod/Nvector/master/docs/tutorials/images/ex1img.png" src="https://raw.githubusercontent.com/pbrod/Nvector/master/docs/tutorials/images/ex1img.png" />
<p>Given two positions, A and B as latitudes, longitudes and depths relative to
Earth, E.</p>
<p>Find the exact vector between the two positions, given in meters north, east,
and down, and find the direction (azimuth) to B, relative to north.
Assume WGS-84 ellipsoid. The given depths are from the ellipsoid surface.
Use position A to define north, east, and down directions.
(Due to the curvature of Earth and different directions to the North Pole,
the north, east, and down directions will change (relative to Earth) for
different places.  A must be outside the poles for the north and east
directions to be defined.)</p>
<dl>
<dt>Solution:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">nvector</span> <span class="k">as</span> <span class="nn">nv</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">nvector</span> <span class="kn">import</span> <span class="n">rad</span><span class="p">,</span> <span class="n">deg</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">lat_EA</span><span class="p">,</span> <span class="n">lon_EA</span><span class="p">,</span> <span class="n">z_EA</span> <span class="o">=</span> <span class="n">rad</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">rad</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lat_EB</span><span class="p">,</span> <span class="n">lon_EB</span><span class="p">,</span> <span class="n">z_EB</span> <span class="o">=</span> <span class="n">rad</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="n">rad</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="mi">6</span>
</pre></div>
</div>
</dd>
<dt>Step1: Convert to n-vectors:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n_EA_E</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">lat_lon2n_E</span><span class="p">(</span><span class="n">lat_EA</span><span class="p">,</span> <span class="n">lon_EA</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_EB_E</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">lat_lon2n_E</span><span class="p">(</span><span class="n">lat_EB</span><span class="p">,</span> <span class="n">lon_EB</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Step2: Find p_AB_E (delta decomposed in E).WGS-84 ellipsoid is default:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p_AB_E</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">n_EA_E_and_n_EB_E2p_AB_E</span><span class="p">(</span><span class="n">n_EA_E</span><span class="p">,</span> <span class="n">n_EB_E</span><span class="p">,</span> <span class="n">z_EA</span><span class="p">,</span> <span class="n">z_EB</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Step3: Find R_EN for position A:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">R_EN</span> <span class="o">=</span> <span class="n">nv</span><span class="o">.</span><span class="n">n_E2R_EN</span><span class="p">(</span><span class="n">n_EA_E</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Step4: Find p_AB_N (delta decomposed in N).</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p_AB_N</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R_EN</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">p_AB_E</span><span class="p">)</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">valtxt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{0:8.2f}</span><span class="s1">, </span><span class="si">{1:8.2f}</span><span class="s1">, </span><span class="si">{2:8.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">p_AB_N</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;Ex1: delta north, east, down = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">valtxt</span><span class="p">)</span>
<span class="go">&#39;Ex1: delta north, east, down = 331730.23, 332997.87, 17404.27&#39;</span>
</pre></div>
</div>
</dd>
<dt>Step5: Also find the direction (azimuth) to B, relative to north:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">azimuth</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">p_AB_N</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p_AB_N</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;azimuth = </span><span class="si">{0:4.2f}</span><span class="s1"> deg&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">deg</span><span class="p">(</span><span class="n">azimuth</span><span class="p">))</span>
<span class="go">&#39;azimuth = 45.11 deg&#39;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nvector.core.n_EA_E_and_p_AB_E2n_EB_E.html" class="btn btn-neutral float-right" title="5.2.14. nvector.core.n_EA_E_and_p_AB_E2n_EB_E" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="nvector.core.p_EB_E2n_EB_E.html" class="btn btn-neutral float-left" title="5.2.12. nvector.core.p_EB_E2n_EB_E" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2020, Norwegian Defence Research Establishment (FFI)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>