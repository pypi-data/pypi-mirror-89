const B={};import V from"../../__snowpack__/env.js";B.env=V;function x(e,o){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);o&&(l=l.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),n.push.apply(n,l)}return n}function k(e){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?x(Object(n),!0).forEach(function(l){K(e,l,n[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(n,l))})}return e}function K(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}import a,{useCallback as $,useEffect as A,useMemo as h,useState as S}from"../../web_modules/react.js";import{Trans as N,useTranslation as D}from"../../web_modules/react-i18next.js";import{headerHeight as U,link as W,primaryColor as H,rem as r,transitionProps as M}from"../utils/style.js";import R from"../../web_modules/react-spinners/BarLoader.js";import q from"./Chart.js";import I from"./ChartCollapse.js";import z from"./Pagination.js";import F from"./SearchInput.js";import G from"../../web_modules/lodash/groupBy.js";import m from"../../web_modules/styled-components.js";import J from"../hooks/useSearchValue.js";const Q=B.env.SNOWPACK_PUBLIC_PATH,X=m(z).withConfig({displayName:"ChartPage__StyledPagination",componentId:"sc-24xkc5-0"})(["margin-top:",";"],r(20)),Y=m.div.withConfig({displayName:"ChartPage__Wrapper",componentId:"sc-24xkc5-1"})(["display:flex;flex-wrap:wrap;justify-content:flex-start;align-items:stretch;align-content:flex-start;margin-bottom:-",";> *{margin:0 "," "," 0;flex-shrink:0;flex-grow:0;&.maximized{margin-right:0;}}"],r(20),r(20),r(20)),Z=m.div.withConfig({displayName:"ChartPage__Search",componentId:"sc-24xkc5-2"})(["width:",";margin-bottom:",";"],r(280),r(16)),ee=m.div.withConfig({displayName:"ChartPage__Loading",componentId:"sc-24xkc5-3"})(["display:flex;justify-content:center;align-items:center;min-height:",";padding:"," 0;"],r(200),r(40)),T=m.div.withConfig({displayName:"ChartPage__Empty",componentId:"sc-24xkc5-4"})(["width:100%;text-align:center;font-size:",";color:var(--text-lighter-color);line-height:",";height:",";padding:"," 0 ",";background-color:var(--background-color);background-image:url(",");background-repeat:no-repeat;background-position:calc(50% + ",") ",";background-size:"," ",";"," ",""],r(16),r(24),e=>{var o;return(o=e.height)!==null&&o!==void 0?o:"auto"},r(320),r(70),`${Q}/images/empty.svg`,r(25),r(70),r(280),r(244),M(["color","background-color"]),W),te=({items:e,loading:o,chartSize:n,withChart:l,className:f})=>{const{t:p}=D("common"),[u,_]=S(1),y=12,[P,w]=S(""),d=J(P),s=h(()=>{try{var t;const c=new RegExp(d);return(t=e==null?void 0:e.filter(i=>c.test(i.label)))!==null&&t!==void 0?t:[]}catch(c){return[]}},[e,d]),C=h(()=>{var t;return(t=s==null?void 0:s.slice((u-1)*y,u*y))!==null&&t!==void 0?t:[]},[s,u]);A(()=>{_(1)},[d]);const E=h(()=>Object.entries(G(e!=null?e:[],t=>t.label.split("/")[0])).sort(([t],[c])=>{const i=t.toUpperCase(),g=c.toUpperCase();return i<g?-1:i>g?1:0}),[e]),L=h(()=>Math.ceil(s.length/y),[s]),j=$((t,c)=>o?a.createElement(ee,null,a.createElement(R,{color:H,width:"20%",height:"4px"})):a.createElement(Y,null,t.length?t.map((i,g)=>{var v,b;const O=Symbol(i.label);return a.createElement(q,{cid:O,key:i.id||i.label,width:(v=n==null?void 0:n.width)!==null&&v!==void 0?v:r(430),height:(b=n==null?void 0:n.height)!==null&&b!==void 0?b:r(337)},l==null?void 0:l(k(k({},i),{},{cid:O}),g))}):a.createElement(T,{height:r(500)},c?a.createElement(N,{i18nKey:"common:search-empty"},"Nothing found. Please try again with another word.",a.createElement("br",null),"Or you can ",a.createElement("a",{onClick:()=>w("")},"see all charts"),"."):p("common:empty"))),[l,o,n,p]);return a.createElement("div",{className:f},a.createElement(Z,null,a.createElement(F,{placeholder:p("common:search-tags"),rounded:!0,value:P,onChange:t=>w(t)})),d?a.createElement(I,{title:p("common:search-result"),total:s.length},j(C,!0),C.length?a.createElement(X,{page:u,total:L,onChange:_}):null):E.length?E.map((t,c)=>a.createElement(I,{title:t[0],key:t[0],total:t[1].length,opened:c===0},j(t[1]))):a.createElement(T,{height:`calc(100vh - ${U} - ${r(96)})`},a.createElement(N,{i18nKey:"common:unselected-empty"},"Nothing selected.",a.createElement("br",null),"Please select display data from right side.")))};export default te;
