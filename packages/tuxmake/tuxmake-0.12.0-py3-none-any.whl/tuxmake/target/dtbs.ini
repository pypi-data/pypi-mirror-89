[target]
description = Device Tree Blobs
dependencies = config
preconditions = test -d arch/{target_arch}/boot/dts
commands = {make} dtbs
    && mkdir -p {build_dir}/dtbsinstall/dtbs
    && {make} dtbs_install INSTALL_DTBS_PATH={build_dir}/dtbsinstall/dtbs
    && tar caf {build_dir}/dtbs.tar.xz -C {build_dir}/dtbsinstall dtbs
alt_commands = {make} dtbs
    && mkdir -p {build_dir}/dtbsinstall/dtbs
    && find {build_dir}/arch/{target_arch}/boot/dts/ -name \*.dtb -exec cp '{{}}' {build_dir}/dtbsinstall/dtbs/ ';'
    && tar caf {build_dir}/dtbs.tar.xz -C {build_dir}/dtbsinstall dtbs

[artifacts]
dtbs.tar.xz = dtbs.tar.xz
