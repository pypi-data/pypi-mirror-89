'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a};(function(a,b){return'object'===('undefined'==typeof exports?'undefined':_typeof(exports))?module.exports=b():'function'==typeof define&&define.amd?define(function(){return b()}):a.datepicker=b()})(window,function(){'use strict';function b(B,C){if(w.includes(C))throw'A datepicker already exists on that element.';var D=B.position,E=B.maxDate,F=B.minDate,G=B.dateSelected,H=B.formatter,I=B.customMonths,J=B.customDays,K=B.overlayPlaceholder,L=B.overlayButton,M=B.startDay,N=B.disabledDates,O=+r(G);if(B.disabledDates=(N||[]).map(function(S){if(!q(S))throw'You supplied an invalid date to "options.disabledDates".';else if(+r(S)==O)throw'"disabledDates" cannot contain the same date as "dateSelected".';return+r(S)}),D){var P=['tr','tl','br','bl','c'].some(function(S){return D===S});if(!P)throw'"options.position" must be one of the following: tl, tr, bl, br, or c.';B.position=d(D)}else B.position=d('bl');if(['startDate','dateSelected','minDate','maxDate'].forEach(function(S){if(B[S]){if(!q(B[S])||isNaN(+B[S]))throw'"options.'+S+'" needs to be a valid JavaScript Date object.';B[S]=r(B[S])}}),B.startDate=r(B.startDate||B.dateSelected||new Date),B.formatter='function'==typeof H?H:null,E<F)throw'"maxDate" in options is less than "minDate".';if(G){if(F>G)throw'"dateSelected" in options is less than "minDate".';if(E<G)throw'"dateSelected" in options is greater than "maxDate".'}if(['onSelect','onShow','onHide','onMonthChange'].forEach(function(S){B[S]='function'==typeof B[S]&&B[S]}),[I,J].forEach(function(S,T){if(S){var V='[object Array]'!=={}.toString.call(S)||S.length!==(T?7:12);if(V)throw['"customMonths" must be an array with 12 strings.','"customDays" must be an array with 7 strings.'][T];B[T?'days':'months']=S}}),void 0!==M&&+M&&0<+M&&7>+M){var Q=(B.customDays||y).slice(),R=Q.splice(0,M);B.customDays=Q.concat(R),B.startDay=+M}else B.startDay=0;return[K,L].forEach(function(S,T){S&&S.split&&(T?B.overlayButton=S:B.overlayPlaceholder=S)}),B}function c(){return{startDate:r(new Date),position:'bl'}}function d(B){var C={};return(C[A[B[0]]]=1,'c'===B)?C:(C[A[B[1]]]=1,C)}function f(B,C){var D=g(B,C),E=h(B,C),F=j(C);C.calendar.innerHTML=D+E+F}function g(B,C){return'\n      <div class="qs-controls">\n        <div class="qs-arrow qs-left"></div>\n        <div class="qs-month-year">\n          <span class="qs-month">'+C.months[B.getMonth()]+'</span>\n          <span class="qs-year">'+B.getFullYear()+'</span>\n        </div>\n        <div class="qs-arrow qs-right"></div>\n      </div>\n    '}function h(B,C){var D=C.minDate,E=C.maxDate,F=C.dateSelected,G=C.currentYear,H=C.currentMonth,I=C.noWeekends,J=C.days,K=C.disabledDates,L=new Date,M=L.toJSON().slice(0,7)===B.toJSON().slice(0,7),N=new Date(new Date(B).setDate(1)),O=N.getDay()-C.startDay,P=0>O?7:0;N.setMonth(N.getMonth()+1),N.setDate(0);var Q=N.getDate(),R=[],S=P+7*(0|(O+Q)/7);S+=(O+Q)%7?7:0,0!==C.startDay&&0==O&&(S+=7);for(var T=1;T<=S;T++){var U=J[(T-1)%7],V=T-(0<=O?O:7+O),W=new Date(G,H,V),X=1>V||V>Q,Y='',Z='<span class="qs-num">'+V+'</span>';if(X)Y='qs-empty',Z='';else{var $=D&&W<D||E&&W>E||K.includes(+r(W)),_=J[6],aa=J[0],ca=M&&!$&&V===L.getDate();$=$||I&&(U===_||U===aa),Y=$?'qs-disabled':ca?'qs-current':''}+W!=+F||X||(Y+=' qs-active'),R.push('<div class="qs-square qs-num '+U+' '+Y+'">'+Z+'</div>')}var da=J.map(function(ea){return'<div class="qs-square qs-day">'+ea+'</div>'}).concat(R);if(0!=da.length%7)throw'Calendar not constructed properly. The # of squares should be a multiple of 7.';return da.unshift('<div class="qs-squares">'),da.push('</div>'),da.join('')}function j(B){var C=B.overlayPlaceholder,D=B.overlayButton;return'\n      <div class="qs-overlay qs-hidden">\n        <div class="qs-close">&#10005;</div>\n        <input type="number" class="qs-overlay-year" placeholder="'+C+'" />\n        <div class="qs-submit qs-disabled">'+D+'</div>\n      </div>\n    '}function k(B,C){var D=C.currentMonth,E=C.currentYear,F=C.calendar,G=C.el,H=C.onSelect,I=F.querySelector('.qs-active'),J=B.textContent;C.dateSelected=new Date(E,D,J),I&&I.classList.remove('qs-active'),B.classList.add('qs-active'),l(G,C),H&&H(C)}function l(B,C){return C.nonInput?void 0:C.formatter?C.formatter(B,C.dateSelected):void(B.value=C.dateSelected.toDateString())}function m(B,C,D){D?C.currentYear=D:(C.currentMonth+=B.contains('qs-right')?1:-1,12===C.currentMonth?(C.currentMonth=0,C.currentYear++):-1===C.currentMonth&&(C.currentMonth=11,C.currentYear--));var E=new Date(C.currentYear,C.currentMonth,1);f(E,C),C.currentMonthName=C.months[C.currentMonth],C.onMonthChange&&C.onMonthChange(C)}function n(B){if(!B.noPosition){var C=B.el,D=B.calendar,E=B.position,F=B.parent,G=E.top,H=E.right,I=E.centered;if(I)return D.classList.add('qs-centered');var J=F.getBoundingClientRect(),K=C.getBoundingClientRect(),L=D.getBoundingClientRect(),M=K.top-J.top+F.scrollTop,N='\n      top:'+(M-(G?L.height:-1*K.height))+'px;\n      left:'+(K.left-J.left+(H?K.width-L.width:0))+'px;\n    ';D.setAttribute('style',N)}}function o(B,C){if(!q(B))throw'`setDate` needs a JavaScript Date object.';B=r(B),this.currentYear=B.getFullYear(),this.currentMonth=B.getMonth(),this.currentMonthName=this.months[B.getMonth()],this.dateSelected=C?void 0:B,C||l(this.el,this),f(B,this),C&&(this.el.value='')}function p(){this.setDate(this.startDate,!0)}function q(B){return['[object Date]'==={}.toString.call(B),'Invalid Date'!==B.toString()].every(Boolean)}function r(B){return B?new Date(B.toDateString()):B}function s(){var B=this.calendar,C=this.parent,D=this.el;x.forEach(function(E){window.removeEventListener(E,v)}),B.remove(),B.hasOwnProperty('parentStyle')&&(C.style.position=''),w=w.filter(function(E){return E!==D})}function t(){}function u(B){B.calendar.classList.remove('qs-hidden'),n(B),B.onShow&&B.onShow(B)}function v(B){function C(R){var S=R.calendar,T=H.classList,U=S.querySelector('.qs-month-year'),V=T.contains('qs-close');if(T.contains('qs-num')){var W='SPAN'===H.nodeName?H.parentNode:H,X=['qs-disabled','qs-active','qs-empty'].some(function(Z){return W.classList.contains(Z)});X||k(W,R)}else if(T.contains('qs-arrow'))m(T,R);else if(G.includes(U)||V)D(S,V,R);else if(H.classList.contains('qs-submit')){var Y=S.querySelector('.qs-overlay-year');E(B,Y,R)}}function D(R,S){['.qs-overlay','.qs-controls','.qs-squares'].forEach(function(V,W){R.querySelector(V).classList.toggle(W?'qs-blur':'qs-hidden')});var U=R.querySelector('.qs-overlay-year');S?U.value='':U.focus()}function E(R,S,T){var U=isNaN(new Date().setFullYear(S.value||void 0));if(13===R.which||'click'===R.type){if(U||S.classList.contains('qs-disabled'))return;m(null,T,S.value)}else{var V=T.calendar.querySelector('.qs-submit');V.classList[U?'add':'remove']('qs-disabled')}}if(!(this.isMobile&&this.disableMobile)){if(!B.path){for(var K=B.target,L=[];K!==document;)L.push(K),K=K.parentNode;B.path=L}var F=B.type,G=B.path,H=B.target,I=this.calendar,J=this.el,M=I.classList,O=G.includes(I);if('keydown'===F){var P=I.querySelector('.qs-overlay'),Q=!P.classList.contains('qs-hidden');if(13===B.which&&Q)return B.stopPropagation(),E(B,H,this);if(27===B.which&&Q)return D(I,!0,this);if(9!==B.which)return}return'focusin'===F?H===J&&u(this):void(this.noPosition?!!O&&C(this):'click'===F&&O?C(this):'input'===F?E(B,H,this):H!==J&&t(this))}}Array.prototype.includes||(Array.prototype.includes=function(B){return this.reduce(function(C,D){return C||D===B},!1)});var w=[],x=['click','focusin','keydown','input'],y=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],z=['January','February','March','April','May','June','July','August','September','October','November','December'],A={t:'top',r:'right',b:'bottom',l:'left',c:'centered'};return function(B,C){var F=B.split?document.querySelector(B):B;C=b(C||c(),F,B);var G=F.parentElement,H=document.createElement('div'),_options=C,D=_options.startDate,E=_options.dateSelected,I=F===document.body||F===document.querySelector('html'),J={el:F,parent:G,nonInput:'INPUT'!==F.nodeName,noPosition:I,position:!I&&C.position,startDate:D,dateSelected:E,disabledDates:C.disabledDates,minDate:C.minDate,maxDate:C.maxDate,noWeekends:!!C.noWeekends,calendar:H,currentMonth:(D||E).getMonth(),currentMonthName:(C.months||z)[(D||E).getMonth()],currentYear:(D||E).getFullYear(),setDate:o,reset:p,remove:s,onSelect:C.onSelect,onShow:C.onShow,onHide:C.onHide,onMonthChange:C.onMonthChange,formatter:C.formatter,months:C.months||z,days:C.customDays||y,startDay:C.startDay,overlayPlaceholder:C.overlayPlaceholder||'4-digit year',overlayButton:C.overlayButton||'Submit',disableMobile:C.disableMobile,isMobile:'ontouchstart'in window};return E&&l(F,J),H.classList.add('qs-datepicker'),H.classList.add('qs-hidden'),w.push(F),f(D||E,J),x.forEach(function(K){window.addEventListener(K,v.bind(J))}),'static'===getComputedStyle(G).position&&(G.style.position='relative'),G.appendChild(H),J}});