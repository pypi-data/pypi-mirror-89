{% extends 'viewflow/base.html' %}{% load i18n viewflow %}

{% block body %}
<vf-page-scroll-fix></vf-page-scroll-fix>
<vf-page class="vf-page">
  {% block page-menu %}
  <aside class="vf-page__menu mdc-drawer mdc-drawer--dismissible">
    {% block page-menu-header %}
    <header class="mdc-drawer__header vf-page__menu-header">
      <div class="vf-page__menu-header-content">
        {% block page-menu-avatar %}
          {% if user.is_authenticated %}
            <img class="vf-page__menu-avatar" src="{{ request.user|user_avatar_url }}" alt="{{ request.user.get_full_name|default:request.user.get_username|title }}">
          {% endif %}
        {% endblock %}
        <div class="vf-page__menu-info">
          <div class="vf-page__menu-user">
            {% block page-menu-user-info %}
              <div class="vf-page__menu-title">
                {{ request.user.get_full_name|default:request.user.get_username|title }}
              </div>
              {% if request.user.email != request.user.get_username %}
              <div class="vf-page__menu-subtitle">{{ request.user.email}}</div>
              {% endif %}
            {% endblock page-menu-user-info %}
          </div>
          <div class="vf-page__menu-toggle">
            <button class="mdc-button vf-page__menu-toggle-button">
              <i class="material-icons">arrow_drop_down</i>
            </button>
          </div>
        </div>
      </div>
    </header>
    {% endblock page-menu-header %}
    {% block page-menu-content %}
    <nav class="mdc-drawer__content">
      <div class="mdc-list">
        {% block page-menu-primary %}
        <div class="vf-page__menu-primary">
          {% block page-menu-app %}
            {% if app %}{% include app.menu_template_name with app=app %}{% endif %}
            {% if site %}{% include site.menu_template_name with site=site user=request.user only %}{% endif %}
          {% endblock %}
        </div>
        {% endblock page-menu-primary %}
        {% block page-menu-secondary %}
        <div class="vf-page__menu-secondary">
          {% block page-menu-user %}
          <vf-page-menu-navigation class="mdc-list">
            {% block page-menu-user-actions %}
              {% url 'profile' as profile_url %}
              {% if profile_url %}
              <a class="mdc-list-item vf-page__menu-list-item" href="{{ profile_url }}">
                <i class="material-icons">account_box</i> {% trans 'Profile' %}
              </a>
              {% endif %}
              {% url 'logout' as logout_url %}
              {% if logout_url %}
              <a class="mdc-list-item vf-page__menu-list-item" href="{{ logout_url }}">
                <i class="material-icons">exit_to_app</i> {% trans 'Log out' %}
              </a>
              {% endif %}
            {% endblock %}
          </vf-page-menu-navigation>
          {% endblock page-menu-user %}
        </div>
        {% endblock page-menu-secondary %}
      </div>
    </nav>
    {% endblock page-menu-content %}
  </aside>
  {% endblock page-menu %}
  {% block page-body %}
  <div class="vf-page__body mdc-drawer-app-content">
    {% block page-toolbar %}
    <header class="mdc-top-app-bar vf-page__body-toolbar">
      <div class="mdc-top-app-bar__row">
        <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
          <button class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button vf-page__menu-toggle" aria-label="Open navigation menu" data-turbolinks="false">menu</button>
          <span class="mdc-top-app-bar__title">
            {% block page-title %}{{ app.title|default:site.title|default:"Django Material" }}{% endblock %}
          </span>
        </section>
      </div>
    </header>
    {% endblock %}
    {% block page-content %}
    <main class="vf-page__content">
      {% block content %}{% endblock %}
    </main>
    {% endblock %}
  </div>
  {% endblock page-body %}
</vf-page>
{% endblock %}
