{"version":3,"sources":["gdpr.js","index.js"],"names":["jQuery","document","getElementsByClassName","hidden","init","saveConsent","data","$","serialize","ajax","url","attr","type","success","remove","removeClass","error","jqXHR","textStatus","errorThrown","window","alert","gettext","ready","navigator","userAgent","match","addClass","click","e","target"],"mappings":";;;CASA,WAoD0B,oBAAXA,QACPC,SAASC,uBAAuB,yBAAyB,GAAGC,QAAS,EACrEF,SAASC,uBAAuB,4BAA4B,GAAGC,QAAS,GArDnEC,WA0BAC,SAAAA,IACLC,KAAOC,EAAE,iBAAiBC,YACZD,EAAEE,KAAK,CACjBC,IAAKH,EAAE,iBAAiBI,KAAK,UAC7BC,KAAM,OACNN,KAAMA,KACNO,QAAS,WACLN,EAAE,0BAA0BO,SAC5BP,EAAE,6BAA6BO,SAC/BP,EAAE,QAAQQ,YAAY,kBAE1BC,MAAO,SAAUC,EAAOC,EAAYC,GAChCC,OAAOC,MAAMC,QAAQ,2DArCjCf,EAAEN,UAAUsB,MAAM,WACXC,UAAUC,UAAUC,MAAM,mBACzBnB,EAAE,8BAA8BoB,SAAS,mBAKjDpB,EAAE,4BAA4BqB,MAAM,WAChCrB,EAAE,6BAA6BoB,SAAS,WACxCpB,EAAE,QAAQoB,SAAS,mBAGvBpB,EAAE,wCAAwCqB,MAAM,WAC5CrB,EAAE,6BAA6BQ,YAAY,WAC3CR,EAAE,QAAQQ,YAAY,mBAG1BR,EAAE,wBAAwBqB,MAAM,SAACC,GAC7BtB,EAAE,kCAAkCQ,YAAY,UAChDR,EAAE,wBAAwBQ,YAAY,UACtCR,EAAEsB,EAAEC,QAAQH,SAAS,UACfrB,IAAAA,EAAOC,EAAEsB,EAAEC,QAAQxB,OACzBC,EAAE,YAAcD,EAAKwB,QAAQH,SAAS,YAoB1CpB,EAAE,yBAAyBqB,MAAM,WAC7BvB,MAGJE,EAAE,cAAcqB,MAAM,WAClBvB,MAOAD,GAxDR;;ACIA,aAHA,QAAA,eAGA,QAAA","file":"shuup-gdpr.js","sourceRoot":"../static_src","sourcesContent":["/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2020, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n(() => {\n    function init() {\n    $(document).ready(function() {\n        if(navigator.userAgent.match(/Windows Phone/i)){\n            $(\".gdpr-consent-warn-content\").addClass(\"windows-phone\");\n        }\n\n    });\n\n    $(\"#privacy-preferences-btn\").click(() => {\n        $(\".gdpr-consent-preferences\").addClass(\"visible\");\n        $(\"body\").addClass(\"body-noscroll\");\n    });\n\n    $(\".gdpr-consent-preferences .btn-close\").click(() => {\n        $(\".gdpr-consent-preferences\").removeClass(\"visible\");\n        $(\"body\").removeClass(\"body-noscroll\");\n    });\n\n    $(\".consent-option-item\").click((e) => {\n        $(\".gdpr-consent-preference-panel\").removeClass(\"active\");\n        $(\".consent-option-item\").removeClass(\"active\");\n        $(e.target).addClass(\"active\");\n        const data = $(e.target).data();\n        $(\"#consent_\" + data.target).addClass(\"active\");\n    });\n\n    function saveConsent() {\n        data = $(\"#consent-form\").serialize();\n        var request = $.ajax({\n            url: $(\"#consent-form\").attr(\"action\"),\n            type: 'POST',\n            data: data,\n            success: function() {\n                $(\".gdpr-consent-warn-bar\").remove();\n                $(\".gdpr-consent-preferences\").remove(); // Remove GDPR divs and their content upon successful completion\n                $(\"body\").removeClass(\"body-noscroll\");\n            },\n            error: function (jqXHR, textStatus, errorThrown) {\n                window.alert(gettext(\"Error! Saving the consent failed, please try again.\"));\n            }\n        });\n    }\n\n    $(\"#btn-save-preferences\").click(() => {\n        saveConsent();\n    });\n\n    $(\"#agree-btn\").click(() => {\n        saveConsent();\n    });\n    }\n    if (typeof jQuery === \"undefined\") {\n        document.getElementsByClassName(\"gdpr-consent-warn-bar\")[0].hidden = true;\n        document.getElementsByClassName(\"gdpr-consent-preferences\")[0].hidden = true;\n    } else {\n        init();\n    }\n\n})();\n","/**\n * This file is part of Shuup.\n *\n * Copyright (c) 2012-2020, Shoop Commerce Ltd. All rights reserved.\n *\n * This source code is licensed under the OSL-3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n// styles\nimport \"./gdpr.less\";\n\n// scripts\nimport \"./gdpr.js\";\n"]}