import p from"../../components/ChartPage.js";import e,{useCallback as h,useEffect as C,useMemo as f,useRef as R,useState as j}from"../../../web_modules/react.js";import w from"../../components/SamplePage/AudioChart.js";import E from"../../components/Content.js";import x from"../../components/Error.js";import A from"../../components/RunAside.js";import S from"../../components/Title.js";import{rem as T}from"../../utils/style.js";import b from"../../hooks/useTagFilter.js";import{useTranslation as k}from"../../../web_modules/react-i18next.js";const v={height:T(244)},F=()=>{const{t:u}=k(["sample","common"]),r=R();C(()=>{const i=window.AudioContext||window.webkitAudioContext;return r.current=new i,()=>{var n;(n=r.current)===null||n===void 0||n.close()}},[]);const[t,l]=j(!0),{runs:o,tagsWithSingleRun:c,selectedRuns:a,onChangeRuns:m,loading:s}=b("audio",t),d=f(()=>o.length?e.createElement(A,{runs:o,selectedRuns:a,onChangeRuns:m,running:t,onToggleRunning:l}):null,[m,t,o,a]),g=h(({run:i,label:n})=>e.createElement(w,{audioContext:r.current,run:i,tag:n,running:t}),[t]);return e.createElement(e.Fragment,null,e.createElement(S,null,u("common:sample")," - ",u("common:audio")),e.createElement(E,{aside:d,loading:s},!s&&!o.length?e.createElement(x,null):e.createElement(p,{items:c,chartSize:v,withChart:g,loading:s})))};export default F;
