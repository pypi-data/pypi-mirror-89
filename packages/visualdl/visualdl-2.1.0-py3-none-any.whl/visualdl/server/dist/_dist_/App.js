const _={};import j from"../__snowpack__/env.js";_.env=j;import e,{Suspense as w,useCallback as b,useEffect as s,useMemo as v}from"../web_modules/react.js";import{Redirect as R,Route as i,BrowserRouter as x,Switch as y,useLocation as N}from"../web_modules/react-router-dom.js";import{THEME as C,matchMedia as c}from"./utils/theme.js";import{headerHeight as u,position as T,size as k,zIndexes as A}from"./utils/style.js";import P from"./components/ErrorBoundary.js";import d from"./pages/error.js";import{Helmet as S}from"../web_modules/react-helmet.js";import p from"../web_modules/nprogress.js";import B from"./components/Navbar.js";import{SWRConfig as I}from"../web_modules/swr.js";import{ToastContainer as L}from"../web_modules/react-toastify.js";import{actions as H}from"./store/index.js";import{fetcher as M}from"./utils/fetch.js";import f from"./routes/index.js";import h from"../web_modules/styled-components.js";import{useDispatch as O}from"../web_modules/react-redux.js";import{useTranslation as z}from"../web_modules/react-i18next.js";const E=_.env.SNOWPACK_PUBLIC_BASE_URI,D=h.main.withConfig({displayName:"App__Main",componentId:"n063fb-0"})(["padding-top:",";"],u),U=h.header.withConfig({displayName:"App__Header",componentId:"n063fb-1"})(["z-index:",";"," ",""],A.header,k(u,"100%"),T("fixed",0,0,null,0)),l=f.find(t=>t.default),V=f.reduce((t,r)=>(r.children?t.push(...r.children):t.push(r),t),[]),W=()=>(s(()=>(p.start(),()=>{p.done()}),[]),null),K=()=>{const t=N();return s(()=>{window._hmt.push(["_trackPageview",E+t.pathname])},[t.pathname]),null},F=()=>{var t;const{t:r,i18n:o}=z("errors"),g=v(()=>o.language?o.dir(o.language):"",[o]),m=O(),a=b(n=>m(H.theme.setTheme(n.matches?"dark":"light")),[m]);return s(()=>{if(!C)return c.addEventListener("change",a),()=>{c.removeEventListener("change",a)}},[a]),e.createElement("div",{className:"app"},e.createElement(S,{defaultTitle:"VisualDL",titleTemplate:"%s - VisualDL"},e.createElement("html",{lang:o.language,dir:g})),e.createElement(I,{value:{fetcher:M,revalidateOnFocus:!1,revalidateOnReconnect:!1}},e.createElement(D,null,e.createElement(x,{basename:E||"/"},e.createElement(K,null),e.createElement(U,null,e.createElement(B,null)),e.createElement(P,{fallback:e.createElement(d,null)},e.createElement(w,{fallback:e.createElement(W,null)},e.createElement(y,null,e.createElement(R,{exact:!0,from:"/",to:(t=l==null?void 0:l.path)!==null&&t!==void 0?t:"/index"}),V.map(n=>e.createElement(i,{key:n.id,path:n.path,component:n.component})),e.createElement(i,{path:"*"},e.createElement(d,{title:r("errors:page-not-found")}))))))),e.createElement(L,null)))};export default F;
